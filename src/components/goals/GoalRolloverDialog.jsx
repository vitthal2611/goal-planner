import React, { useState } from 'react';\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Typography,\n  Box,\n  Divider,\n  Stack\n} from '@mui/material';\nimport { GoalRolloverCard } from './GoalRolloverCard';\nimport { categorizeGoalsForRollover, processGoalRollover } from '../../utils/rolloverUtils';\n\nexport const GoalRolloverDialog = ({ open, onClose, onConfirm, goals, newYear }) => {\n  const { completed, incomplete } = categorizeGoalsForRollover(goals);\n  const [selectedGoals, setSelectedGoals] = useState([]);\n\n  const handleToggleGoal = (goal) => {\n    setSelectedGoals(prev => \n      prev.includes(goal.id)\n        ? prev.filter(id => id !== goal.id)\n        : [...prev, goal.id]\n    );\n  };\n\n  const handleConfirm = () => {\n    const goalsToRollover = incomplete.filter(goal => selectedGoals.includes(goal.id));\n    const rolledOverGoals = processGoalRollover(goalsToRollover, newYear);\n    onConfirm(rolledOverGoals);\n    onClose();\n  };\n\n  return (\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\n      <DialogTitle>\n        Roll Over Goals to {newYear}\n      </DialogTitle>\n      \n      <DialogContent>\n        <Typography variant=\"body1\" paragraph>\n          Select which incomplete goals you'd like to continue working on next year.\n        </Typography>\n\n        {completed.length > 0 && (\n          <Box sx={{ mb: 3 }}>\n            <Typography variant=\"h6\" color=\"success.main\" gutterBottom>\n              âœ… Completed Goals ({completed.length})\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n              These goals won't be rolled over\n            </Typography>\n            <Stack spacing={2}>\n              {completed.map(goal => (\n                <GoalRolloverCard\n                  key={goal.id}\n                  goal={goal}\n                  selected={false}\n                  onToggle={() => {}}\n                  disabled={true}\n                />\n              ))}\n            </Stack>\n          </Box>\n        )}\n\n        {incomplete.length > 0 && (\n          <Box>\n            <Divider sx={{ mb: 2 }} />\n            <Typography variant=\"h6\" color=\"warning.main\" gutterBottom>\n              ðŸ“‹ Incomplete Goals ({incomplete.length})\n            </Typography>\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\n              Select goals to roll over to {newYear}\n            </Typography>\n            <Stack spacing={2}>\n              {incomplete.map(goal => (\n                <GoalRolloverCard\n                  key={goal.id}\n                  goal={goal}\n                  selected={selectedGoals.includes(goal.id)}\n                  onToggle={() => handleToggleGoal(goal)}\n                />\n              ))}\n            </Stack>\n          </Box>\n        )}\n\n        {incomplete.length === 0 && completed.length === 0 && (\n          <Typography variant=\"body1\" color=\"text.secondary\" align=\"center\">\n            No goals found to roll over.\n          </Typography>\n        )}\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose}>\n          Cancel\n        </Button>\n        <Button \n          onClick={handleConfirm} \n          variant=\"contained\"\n          disabled={selectedGoals.length === 0}\n        >\n          Roll Over {selectedGoals.length} Goal{selectedGoals.length !== 1 ? 's' : ''}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};